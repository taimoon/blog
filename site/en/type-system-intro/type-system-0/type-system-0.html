<html lang="en">
  <head>
    <meta date="2024-10-30"/>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width" initial-scale="1.0"/>
    <link rel="stylesheet" href="/style.css"/>
    <title>Type System 0</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/default.min.css"/>
    <script id="ajax-highlight" defer="" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js"></script>
    <script>
              document.addEventListener('DOMContentLoaded', function() {
                    var element = document.getElementById('ajax-highlight');
                    if (element) {
                        hljs.highlightAll();
                    }
                });
             </script>
    <script id="MathJax-script-forreal" defer="" src="https://cdn.mathjax.org/mathjax/2.7-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    MathJax.Hub.Config({
        tex2jax: {
        inlineMath: [ ['$','$'] ],
        processEscapes: true
        }
    });
    </script>
  </head>
  <header>
    <nav>
      <ul>
        <li>
          <a href="/index.html">home</a>
        </li>
        <li>
          <a href="/en/about/about.html">about</a>
        </li>
        <li>
          <a href="/zh/type-system-intro/type-system-0/类型应用入门零.html">中文</a>
        </li>
      </ul>
    </nav>
  </header>
  <main><p>date: 2024-10-30</p><h1>Type System 0</h1>
<h1>Type in programming language?</h1>
<p>A type categorizes a set of values</p>
<ul>
<li>1 is an integer; type(1) =&gt; int</li>
<li>The set of integers is {..., -2, -1, 0, 1, 2 , ...}</li>
<li>The set of strings is {'', 'reimu', 'marisa', ...}</li>
<li>The set of floats is {1.0, 2.0, 3.0, ...}</li>
</ul>
<h1>Instant benefit of annotating type</h1>
<p>When annotated, modern IDE can do these
- Show documentation when hover over the annotated expression and suggest applicable method for the annotated expression</p>
<p><img alt="without pylance" src="/images/type-system-intro/type-system-0/without-pylance.png" loading="lazy"/></p>
<p>Without annotation</p>
<p><img alt="with pylance" src="/images/type-system-intro/type-system-0/with-pylance.png" loading="lazy"/></p>
<p>Annotated</p>
<p><img alt="show documentation" src="/images/type-system-intro/type-system-0/show-doc.png" loading="lazy"/></p>
<p>showing documentation for string type
- type annotations is better than doc string, also a form of contract between caller and callee.</p>
<p><img alt="self documentation" src="/images/type-system-intro/type-system-0/self-documentation.png" loading="lazy"/></p>
<p>Above showing the type signature of <code>extract_brn</code> function, writer can read it and call the function legally.
    <code>extract_brn(123)
    extract_brn(None)
    extract_brn(true)</code>
  When caller did these above,
  we may assume it will go wrong.
  Because the function <code>extract_brn</code> assume its first parameter is string type,
  and if the program break this assumption by passing arguments of different type,
  then the function implementer offer no guarantee in ensure correctness.</p>
<h1>How to get the type of program?</h1>
<pre><code class="language-py">1 : int
</code></pre>
<p>When read out loud:</p>
<blockquote>
<p>The type of 1 is integer</p>
</blockquote>
<p>Below is a rule defined for addition,</p>
<pre><code class="language-py">e1 : int
e2 : int
----
=&gt; e1 + e2 : int
</code></pre>
<p>When read out loud:</p>
<blockquote>
<p>The type of addition of augend and addend is integer, if type of augend is integer and type of addend is integer.</p>
</blockquote>
<p>If addition expression does not follow rule above, then it considered a type error.</p>
<p>First example,</p>
<pre><code class="language-py">2 : int
3 : int
---
2 + 3 : int
</code></pre>
<p>Second example,</p>
<pre><code class="language-py">2 + 3   :  int # from previous section
5       : int
---
2 + 3 + 5 : int
</code></pre>
<p>Third example,</p>
<pre><code class="language-py">'2' : str
3   : int
---
'2' + 3 : error
</code></pre>
<h1>How knowing type can help you diagnose the problem?</h1>
<p>Given the rules and suppositions,</p>
<pre><code class="language-py">print : ((str, float) -&gt; None)
input : ((str) -&gt; str)

# multiplication
f1 : float
f2 : float
---
f1 * f2 : float

# function call 1
a1 : t1
fn : ((t1) -&gt; t2)
---
fn(a1) =&gt; t2

# function call 2
a1 : t1
a2 : t2
fn : ((t1,t2) -&gt; t3)
---
fn(a1,a2) : t3
</code></pre>
<p>Then, why python complains error for the expression below?</p>
<pre><code class="language-py">print("Service Tax is:", input('enter a value:')  * 0.06)
</code></pre>
<p>Let deduce out the type of the expression,</p>
<pre><code class="language-py">print("Service Tax is:", input('enter a value:')  * 0.06)
| # use function call 2
| "Service Tax is:" : str
| input('enter a value:')  * 0.06
| | # use multiplication
| | input('enter a value:')
| | | # function call 1
| | | input : ((str) -&gt; str)
| | | 'enter a value:' : str
| | input('enter a value:') : str
| | 0.6 : float
| error # because float cannot multiply with str
</code></pre>
<p>To fix the expression above, casting the input should make the program functional.</p>
<h1>Suggested Reading</h1>
<ul>
<li>Essentials of Programming Languages by Daniel P. Friedman and Mitchell Wand</li>
<li>Types and Programming Languages by Benjamin C. Pierce</li>
<li>The Little Typer by Daniel P. Friedman and David Thrane Christiansen</li>
</ul></main>
  <footer>
    <a href="https://creativecommons.org/licenses/by-sa/4.0/">COPYRIGHT NOTICE: CC BY-SA 4.0</a>
    <a href="https://github.com/taimoon">github</a>
  </footer>
</html>
